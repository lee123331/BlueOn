<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BlueOn | ì „ë¬¸ê°€ ë§¤ì¹­ í”Œë«í¼</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #0056ff;
      --primary-light: #eaf1ff;
      --bg: #f9fafb;
      --text-dark: #111827;
      --text-gray: #6b7280;
      --white: #ffffff;
      --line: #e5e7eb;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: "Noto Sans KR", sans-serif;
      background: var(--bg);
      color: var(--text-dark);
      transition: background 0.4s, color 0.4s;
    }

    /* HEADER */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 70px;
      background: var(--white);
      border-bottom: 1px solid var(--line);
      transition: background 0.3s, border-color 0.3s;
    }

    .logo {
      font-size: 22px;
      font-weight: 800;
      color: var(--primary);
      cursor: pointer;
    }

    .auth-buttons {
      display: flex;
      align-items: center;
    }

    .auth-buttons button {
      margin-left: 10px;
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid var(--primary);
      background: var(--white);
      color: var(--primary);
      cursor: pointer;
      font-weight: 500;
      transition: 0.25s;
    }
    .auth-buttons button:hover { background: var(--primary); color: var(--white); }

    /* í”„ë¡œí•„ ì•„ì´ì½˜ + ë“œë¡­ë‹¤ìš´ */
    #user-menu {
      display: none;
      align-items: center;
      gap: 12px;
    }

    .logout-btn {
      border: 1px solid var(--line);
      background: #fff;
      color: #111;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .logout-btn:hover { background: var(--primary); color: #fff; border-color: var(--primary); }

    .profile-container {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .profile-container img {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid #e5e7eb;
      transition: all 0.25s ease;
      background-color: #fff;
    }
    .profile-container img:hover { border-color: var(--primary); transform: scale(1.05); }

    .dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 54px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.15);
      overflow: hidden;
      z-index: 100;
      min-width: 170px;
    }
    .dropdown a {
      display: block;
      padding: 12px 18px;
      text-decoration: none;
      color: #111;
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
      transition: background 0.2s ease;
    }
    .dropdown a:hover { background: #f3f6ff; color: var(--primary); }

    /* ë‹¤í¬ëª¨ë“œ */
    body.dark-mode {
      --bg: #0c1324;
      --white: #10182b;
      --text-dark: #e8ecff;
      --text-gray: #aeb9d8;
      --line: #2a3550;
      background: var(--bg);
      color: var(--text-dark);
    }
    body.dark-mode header { background: #121b2f; border-color: #1c2642; }
    body.dark-mode .auth-buttons button {
      background: transparent; color: #cfd8ff; border-color: #3d4e88;
    }
    body.dark-mode .auth-buttons button:hover {
      background: #2442a8; color: #fff; border-color: #2442a8;
    }
    body.dark-mode .dropdown { background: #18223c; box-shadow: 0 8px 25px rgba(0,0,0,0.4); }
    body.dark-mode .dropdown a { color: #d9e2ff; }
    body.dark-mode .dropdown a:hover { background: #2442a8; color: #fff; }

    /* HERO SECTION */
    .hero {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      max-width: 1200px;
      margin: 100px auto 60px;
      padding: 0 40px;
      gap: 50px;
    }
    .hero-left { flex: 1; }

    .hero-left h2 {
      font-size: 42px;
      font-weight: 800;
      line-height: 1.3;
      color: var(--text-dark);
    }
    .hero-left h2 span {
      background: linear-gradient(90deg, #0056ff, #3c8cff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .hero-left p { font-size: 17px; color: var(--text-gray); margin: 20px 0 35px; }

    /* SEARCH BAR */
    .search-bar {
      display: flex;
      align-items: center;
      background: var(--white);
      border-radius: 50px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      max-width: 550px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    .search-bar input {
      flex: 1; border: none; padding: 14px 20px; font-size: 15px; outline: none; background: transparent; color: var(--text-dark);
    }
    .search-bar button {
      background: var(--primary); color: white; border: none; padding: 14px 28px; font-weight: 600; cursor: pointer; transition: 0.2s;
    }
    .search-bar button:hover { background: #0044cc; }

    /* CATEGORY ICONS */
    .category-inline { display: flex; gap: 35px; flex-wrap: wrap; margin-top: 40px; }
    .category { text-align: center; transition: 0.25s; cursor: pointer; }
    .category:hover { transform: translateY(-5px); }
    .category img {
      width: 68px; height: 68px; margin-bottom: 8px;
      filter: drop-shadow(0px 6px 10px rgba(0, 86, 255, 0.15));
    }
    .category p { font-size: 14px; font-weight: 500; }

    /* BANNER */
    .hero-banner {
      flex: 0.9;
      background: linear-gradient(160deg, #0056ff 0%, #4f8bff 100%);
      color: white; border-radius: 22px; padding: 60px 40px;
      box-shadow: 0 10px 30px rgba(0, 86, 255, 0.3);
    }
    body.dark-mode .hero-banner {
      background: linear-gradient(160deg, #002b91 0%, #0048ff 100%);
      box-shadow: 0 10px 30px rgba(0, 86, 255, 0.35);
    }
    .hero-banner h3 { font-size: 24px; font-weight: 700; margin-bottom: 18px; }
    .hero-banner p { font-size: 15px; line-height: 1.6; opacity: 0.95; margin-bottom: 25px; }
    .hero-banner button {
      background: white; color: var(--primary); border: none; padding: 12px 28px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: 0.3s;
    }
    .hero-banner button:hover { background: #f1f5ff; }

    /* POPULAR SECTION */
    .popular-section { background: var(--white); padding: 80px 40px; transition: background 0.4s; }
    body.dark-mode .popular-section { background: #0f1729; }
    .popular-box {
      flex: 1; background: #fff; border-radius: 16px; padding: 30px;
      box-shadow: 0 5px 18px rgba(0,0,0,0.06);
      transition: background 0.3s, box-shadow 0.3s;
    }
    body.dark-mode .popular-box {
      background: #16203a; box-shadow: 0 5px 25px rgba(0,0,0,0.3);
    }
    .popular-box h3 { font-size: 20px; font-weight: 800; margin-bottom: 20px; }
    .popular-box img { width: 80px; height: 80px; display: block; margin: 0 auto 8px; }

    footer {
      background: var(--white); border-top: 1px solid var(--line);
      text-align: center; padding: 40px 20px; font-size: 14px; color: var(--text-gray); margin-top: 80px;
    }
    body.dark-mode footer { background: #121b2f; color: #aab6d9; border-color: #1c2642; }

/* ------------------------------------------------ */
/* ğŸ”” ì•Œë¦¼ ì•„ì´ì½˜ (ì¶œë ¥ ì•„ì´ì½˜ + ë°°ì§€) */
/* ------------------------------------------------ */
.header-notice {
  position: relative;
  margin-left: 20px;
  margin-right: 15px;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;
}

.notice-icon {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ë°˜ë“¯í•œ í…ìŠ¤íŠ¸ ì¢… ì•„ì´ì½˜ */
.notice-bell {
  font-size: 22px;
  line-height: 1;
  display: block;
}

/* ìˆ«ì ë±ƒì§€ */
.notice-badge {
  position: absolute;
  top: -5px;
  right: -8px;
  background: #ff3b30;
  color: #fff;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 11px;
  font-weight: bold;
  display: none;
}

/* ------------------------------------------------ */
/* ğŸ”½ í¬ëª½ ìŠ¤íƒ€ì¼ ì•Œë¦¼ íŒ¨ë„ */
/* ------------------------------------------------ */
.notice-panel {
  position: absolute;
  right: -40px;        /* í—¤ë” ê¸°ì¤€ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì´ë„ë¡ ì¡°ì • */
  top: 45px;
  width: 380px;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
  display: none;
  padding: 0;
  z-index: 1000;
}

.notice-tabs {
  position: relative;
  display: flex;
  gap: 28px;
  padding: 14px 20px 12px;
}

.notice-tab {
  position: relative;
  background: none;
  border: none;
  font-size: 15px;
  font-weight: 700;
  color: #9ca3af;
  cursor: pointer;
  padding: 6px 0;
}

.notice-tab.active {
  color: #111827;
}

/* ğŸ”¥ ë°‘ì¤„ */
.notice-tab-underline {
  position: absolute;
  bottom: 0;          /* ğŸ”¥ ì´ì œ ì •í™•íˆ íƒ­ ì•„ë˜ */
  height: 3px;
  width: 22px;
  background: #111827;
  border-radius: 999px;
  transition: left 0.25s ease;
}



/* ------------------------------------------------ */
/* ğŸ“¦ ì•Œë¦¼ ë‚´ìš© ì˜ì—­ */
/* ------------------------------------------------ */
.notice-content {
  text-align: center;
  padding: 70px 0 50px;
}

/* ë¹ˆ ìƒíƒœ */
.notice-empty-icon {
  font-size: 45px;
  margin-bottom: 10px;
}

.notice-empty-title {
  color: #333;
  font-size: 15px;
  line-height: 1.5;
}

/* í•˜ë‹¨ ì•ˆë‚´ */
.notice-footer {
  color: #888;
  font-size: 12px;
  margin-top: 40px;
  line-height: 1.5;
}
/* ================================
   ì•Œë¦¼ ì•„ì´í…œ ì¹´ë“œ ìŠ¤íƒ€ì¼ 
================================ */
.notice-item-panel {
  background: #ffffff;
  border-radius: 12px;
  padding: 16px 18px;
  margin-bottom: 14px;

  display: flex;
  flex-direction: column;
  gap: 6px;

  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  border: 1px solid #e5e7eb;
  animation: fadeIn 0.2s ease;
}

/* ì œëª©/ë‚´ìš© */
.notice-msg {
  font-size: 14.5px;
  color: #111827;
  line-height: 1.45;
  white-space: pre-line;
  word-break: keep-all;
}

/* ë‚ ì§œ */
.notice-date {
  font-size: 12px;
  color: #6b7280;
  margin-top: 2px;
}

/* ì• ë‹ˆë©”ì´ì…˜ */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}
.header-chat {
  position: relative;
  margin-left: 30px;   /* ğŸ”¥ ì—¬ê¸°ê°€ ê°„ê²© */
  margin-right: 15px;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;
}


.chat-bubble {
  font-size: 22px;
  line-height: 1;
  display: block;
}
#noticePanel {
  max-height: 420px;  /* ì›í•˜ëŠ” ë†’ì´ */
  overflow-y: auto;
  scrollbar-width: thin;
}
.chat-remove-btn {
  background: transparent;
  border: none;
  font-size: 16px;
  color: #9ca3af;
  cursor: pointer;
  padding: 4px;
  transition: 0.2s;
}

.chat-remove-btn:hover {
  color: #ef4444;
}
.trade-notice-card {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.trade-badge {
  font-size: 12px;
  font-weight: 700;
  color: #0056ff;
}

.trade-message {
  font-size: 15px;
  font-weight: 600;
  color: #111827;
}

.trade-sub {
  font-size: 13px;
  color: #6b7280;
}
.notice-list {
  max-height: 340px;
  overflow-y: auto;
  padding: 16px 18px 20px;
}
.notice-content {
  text-align: center;
  padding: 70px 0 50px;
}

  </style>
</head>

<body>
<header>
  <div class="logo" onclick="location.href='index.html'">BlueOn</div>

  <nav>

    <!-- ë¹„ë¡œê·¸ì¸ -->
    <div id="auth-buttons" class="auth-buttons">
      <button onclick="location.href='login.html'">ë¡œê·¸ì¸</button>
      <button onclick="location.href='signup.html'">íšŒì›ê°€ì…</button>
    </div>

    <!-- ë¡œê·¸ì¸ í›„ -->
    <div id="user-menu">

      <button id="openSupportIndex" class="logout-btn" style="margin-left:15px;">
        ê³ ê°ì„¼í„°
      </button>

      <button id="logout-btn" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>

   <!-- ========================= -->
<!-- ğŸ”” ì•Œë¦¼ ì•„ì´ì½˜ ì˜ì—­ -->
<!-- ========================= -->
<div class="header-notice">
  <div class="notice-icon">
    <span class="notice-bell">ğŸ””</span>
    <span id="notice-badge" class="notice-badge">0</span>
  </div>

  <!-- ì•Œë¦¼ íŒ¨ë„ -->
  <div class="notice-panel" id="noticePanel">
    <div class="notice-tabs">
      <div class="notice-tab active" data-tab="trade">ê±°ë˜ ì•Œë¦¼</div>
      <div class="notice-tab" data-tab="system">BlueOn ì•Œë¦¼</div>
      <div class="notice-tab-underline"></div>
    </div>

<div class="notice-content" id="noticeContent">

  <!-- ğŸ”¥ JSê°€ ì‹¤ì œë¡œ append í•˜ëŠ” ëŒ€ìƒ -->
  <div id="noticeList" class="notice-list"></div>

  <!-- ğŸ”½ ì•Œë¦¼ ì—†ì„ ë•Œë§Œ ì‚¬ìš© (JSì—ì„œ innerHTMLë¡œ êµì²´ë¨) -->
  <div class="notice-empty">
    <div class="notice-empty-icon">ğŸŒˆ</div>
    <p class="notice-empty-title">
      ë†“ì¹œ ì•Œë¦¼ ì—†ì´<br>ëª¨ë‘ í™•ì¸í•˜ì…¨ì–´ìš”!
    </p>
  </div>

  <p class="notice-footer">
    ìµœê·¼ 30ì¼ ë™ì•ˆì˜ ì•Œë¦¼ë§Œ ë³´ê´€ë˜ë©°,<br>
    ì´í›„ ìë™ ì‚­ì œë©ë‹ˆë‹¤.
  </p>

</div>


  </div>
</div>


      <!-- ========================= -->
      <!-- ğŸ’¬ ì±„íŒ… ì•„ì´ì½˜ ì˜ì—­ -->
      <!-- ========================= -->
      <div class="header-chat" id="openChat" style="position:relative; margin-left:15px; cursor:pointer;">
        <span class="chat-bubble">ğŸ’¬</span>

        <!-- ğŸ”´ ìƒˆ ë©”ì‹œì§€ badge -->
       <div id="chatBadge" style="
  position:absolute;
  top:-6px;
  right:-8px;
  min-width:18px;
  height:18px;
  padding:0 5px;
  background:#ff3b30;
  color:#fff;
  border-radius:999px;
  display:none;
  align-items:center;
  justify-content:center;
  font-size:11px;
  font-weight:800;
  line-height:18px;
"></div>

      </div>

      <!-- ========================= -->
      <!-- í”„ë¡œí•„ -->
      <!-- ========================= -->
      <div class="profile-container">
        <img id="profile-icon" src="assets/default_profile.png" alt="í”„ë¡œí•„" />
        <div class="dropdown" id="dropdown-menu">
          <!-- JSì—ì„œ ë™ì ìœ¼ë¡œ ì±„ì›€ -->
        </div>
      </div>

    </div>

  </nav>
  
</header>




  <!-- HERO -->
  <section class="hero">
    <div class="hero-left">
      <h2>
        <span>ë‹¹ì‹ ì˜ ì•„ì´ë””ì–´ë¥¼ ë¸Œëœë“œë¡œ,</span><br>
        BlueOnì´ í•¨ê»˜ ì„¤ê³„í•©ë‹ˆë‹¤
      </h2>

      <p>
        ì˜¨ë¼ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ì‹œì‘ì€ â€˜ë¸Œëœë“œ ì„¤ê³„â€™ì…ë‹ˆë‹¤.<br>
        ê¸°íš Â· ë””ìì¸ Â· ê°œë°œ ì „ ê³¼ì •ì„ BlueOnì´ í•¨ê»˜í•©ë‹ˆë‹¤.
      </p>

      <div class="search-bar">
        <input id="mainSearch" type="text" placeholder="ì–´ë–¤ ë¸Œëœë“œë¥¼ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?" />
       <button id="mainSearchBtn">ì‹œì‘í•˜ê¸°</button>
      </div>

      <div class="category-inline">
  <div class="category" data-category="design">
    <img src="https://img.icons8.com/3d-fluency/94/paint-palette.png" alt="ë””ìì¸">
    <p>ë¸Œëœë“œ ë””ìì¸</p>
  </div>

  <div class="category" data-category="dev">
    <img src="https://img.icons8.com/3d-fluency/94/source-code.png" alt="í”„ë¡œê·¸ë˜ë°">
    <p>ì›¹ ê°œë°œ</p>
  </div>

  <div class="category" data-category="content">
    <img src="https://img.icons8.com/3d-fluency/94/camera.png" alt="ì‚¬ì§„Â·ì˜ìƒ">
    <p>ì½˜í…ì¸  ì œì‘</p>
  </div>

  <div class="category" data-category="marketing">
    <img src="https://img.icons8.com/3d-fluency/94/megaphone.png" alt="ë§ˆì¼€íŒ…">
    <p>ë¸Œëœë”©Â·ë§ˆì¼€íŒ…</p>
  </div>

  <div class="category" data-category="copy">
    <img src="https://img.icons8.com/3d-fluency/94/document.png" alt="ê¸€ì“°ê¸°">
    <p>ì¹´í”¼ë¼ì´íŒ…</p>
  </div>
</div>

        </div>
      </div>
    </div>

    <div class="hero-banner">
      <h3>ë‹¹ì‹ ì˜ ë¸Œëœë“œë¥¼<br>ì²˜ìŒë¶€í„° í•¨ê»˜ ì„¤ê³„í•©ë‹ˆë‹¤</h3>
      <p>
        ë‹¨ìˆœ ì „ë¬¸ê°€ ì—°ê²°ì´ ì•„ë‹™ë‹ˆë‹¤.<br>
        ë¸Œëœë“œ ì „ëµ Â· ë””ìì¸ Â· ê°œë°œê¹Œì§€<br>
        BlueOnì´ ì „ ê³¼ì •ì„ í•¨ê»˜í•©ë‹ˆë‹¤.
      </p>
      <button id="startBrandBtn">ë¸Œëœë“œ ì„¤ê³„ ì‹œì‘í•˜ê¸°</button>
    </div>
  </section>

  <!-- POPULAR -->
<section class="popular-section">
  <div style="
    display:flex;
    gap:30px;
    max-width:1200px;
    margin:0 auto;
    flex-wrap:wrap;
  ">

    <!-- ë°•ìŠ¤ 1 : ë¸Œëœë“œ ë””ìì¸ -->
    <div class="popular-box">
      <h3 style="color:#ff7b00;">ë¸Œëœë“œ ë””ìì¸ì—ì„œ ë§ì´ ì°¾ëŠ” ì„œë¹„ìŠ¤</h3>
      <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:18px;">
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/paint-palette.png">
          <p>ë¡œê³  ë””ìì¸</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/name-tag.png">
          <p>ë¸Œëœë“œ í‚¤ë¹„ì£¼ì–¼</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/design.png">
          <p>ìƒì„¸í˜ì´ì§€ ì œì‘</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/edit-image.png">
          <p>SNS ì¹´ë“œë‰´ìŠ¤</p>
        </div>
      </div>
    </div>

    <!-- ë°•ìŠ¤ 2 : ê°œë°œ / ì‡¼í•‘ëª° êµ¬ì¶• -->
    <div class="popular-box">
      <h3 style="color:#0056ff;">ì›¹Â·ì•± ê°œë°œì—ì„œ ì¸ê¸° ìˆì–´ìš”</h3>
      <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:18px;">
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/source-code.png">
          <p>ìì‚¬ëª° êµ¬ì¶•</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/laptop-coding.png">
          <p>ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ì»¤ìŠ¤í„°ë§ˆì´ì§•</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/workflow.png
">
          <p>API ì—°ë™</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/services.png">
          <p>ê´€ë¦¬ì í˜ì´ì§€ ê°œë°œ</p>
        </div>
      </div>
    </div>

    <!-- ë°•ìŠ¤ 3 : ë§ˆì¼€íŒ…Â·ì½˜í…ì¸  ì œì‘ -->
    <div class="popular-box">
      <h3 style="color:#7a4bff;">ìš”ì¦˜ ëœ¨ëŠ” ë§ˆì¼€íŒ…Â·ì½˜í…ì¸  ì„œë¹„ìŠ¤</h3>
      <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:18px;">
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/camera.png">
          <p>ìˆí¼ ì˜ìƒ ì œì‘</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/documentary.png">
          <p>ë¦¬ë·° ì˜ìƒ ì œì‘</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/megaphone.png">
          <p>SNS ìš´ì˜ ëŒ€í–‰</p>
        </div>
        <div style="text-align:center;">
          <img src="https://img.icons8.com/3d-fluency/94/positive-dynamic.png">
          <p>SEO ìƒìœ„ ë…¸ì¶œ</p>
        </div>
      </div>
    </div>

  </div>
</section>

<footer style="
  background: var(--white);
  border-top: 1px solid var(--line);
  text-align:center;
  padding:40px 20px;
  color:#6b7280;
  font-size:14px;
  line-height:1.7;
  margin-top:80px;
">

  <!-- ê¸°ì¡´ ë¬¸êµ¬ ìœ ì§€ -->
  <div style="font-size:14px; margin-bottom:10px;">
    Â© 2025 BlueOn | ì‹ ë¢°ë¡œ ì—°ê²°ë˜ëŠ” ì „ë¬¸ê°€ ë§¤ì¹­ í”Œë«í¼
  </div>

  <!-- ê¸°ì¡´ ì•½ê´€ ë§í¬ ì„¹ì…˜ ìœ ì§€ -->
  <p style="margin-top:10px; margin-bottom:22px;">
    <a href="privacy-policy.html" 
       style="color:#6b7280; font-size:13px; text-decoration:underline; margin-right:12px;">
      ê°œì¸ì •ë³´ ì´ìš© ì•½ê´€
    </a>

    <a href="terms-of-service.html" 
       style="color:#6b7280; font-size:13px; text-decoration:underline;">
      ì „ììƒê±°ë˜ í‘œì¤€ì•½ê´€
    </a>
  </p>

  <!-- ì‚¬ì—…ì ì •ë³´ ì¶”ê°€ ì„¹ì…˜ -->
  <div style="font-size:13px; color:#6b7280; margin-top:20px; line-height:1.6;">
    ìƒí˜¸ëª…: ë¸”ë£¨ì˜¨&nbsp;&nbsp;|&nbsp;&nbsp;ëŒ€í‘œì: ì´ë™ê±´<br>
    ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 894-06-03078<br>
    ì£¼ì†Œ: ê²½ìƒë‚¨ë„ ê¹€í•´ì‹œ ì¸ì œë¡œ11ë²ˆê¸¸ 36, 201í˜¸(ì‚¼ì •ë™)<br>
    ì—…íƒœ/ì¢…ëª©: ì •ë³´í†µì‹ ì—… Â· ë„ë§¤ ë° ì†Œë§¤ì—… / í¬í„¸ ë° ê¸°íƒ€ ì¸í„°ë„· ì •ë³´ ë§¤ê°œ ì„œë¹„ìŠ¤ì—… Â· ì „ììƒê±°ë˜ ì†Œë§¤ ì¤‘ê°œì—…
  </div>

  <!-- ê³ ê°ì„¼í„° -->
  <div style="font-size:13px; margin-top:18px;">
    ê³ ê°ì„¼í„°: support@blueon.kr&nbsp;&nbsp;|&nbsp;&nbsp;010-3585-3426
  </div>

  <!-- ì €ì‘ê¶Œ -->
  <div style="margin-top:25px; color:#9ca3af; font-size:12px;">
    Â© 2025 BlueOn. All rights reserved.
  </div>

</footer>



  <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
  <div id="loginOverlay" style="position:fixed;inset:0;display:none;place-items:center;z-index:9999;background:rgba(0,0,0,.45);">
    <iframe src="login.html" title="ë¡œê·¸ì¸" style="width:min(520px,92vw);height:560px;border:0;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.25);"></iframe>
  </div>

  <script src="https://blueon.up.railway.app/socket.io/socket.io.js"></script>
  
<script>
/* ================================================================
   ì „ì—­ ê¸°ë³¸ ì„¤ì •
================================================================ */
const API_URL = "https://blueon.up.railway.app";

/* ================================================================
   ë¡œê·¸ì¸ ëª¨ë‹¬
================================================================ */
const overlay = document.getElementById("loginOverlay");

function openLoginModal() {
  overlay.style.display = "grid";
}

window.addEventListener("message", async (e) => {
  if (!e.data) return;

  if (e.data.type === "LOGIN_SUCCESS") {
    overlay.style.display = "none";
    await loadUserState();
  }

  if (e.data.type === "CLOSE_LOGIN") {
    overlay.style.display = "none";
  }
});

function showToast(message) {
  const toast = document.getElementById("toast");
  toast.textContent = message;
  toast.style.opacity = "1";
  toast.style.transform = "translateY(0)";

  setTimeout(() => {
    toast.style.opacity = "0";
    toast.style.transform = "translateY(20px)";
  }, 1800);
}

async function loadUserState() {
  const authButtons = document.getElementById("auth-buttons");
  const userMenu = document.getElementById("user-menu");
  const profileIcon = document.getElementById("profile-icon");
  const dropdown = document.getElementById("dropdown-menu");

  try {
    const meRes = await fetch(`${API_URL}/auth/me`, { credentials: "include" });
    const me = await meRes.json();

    if (!me.success) {
      authButtons.style.display = "flex";
      userMenu.style.display = "none";
      return;
    }

    authButtons.style.display = "none";
    userMenu.style.display = "flex";

    let finalAvatar = me.user.avatar_url || "assets/default_profile.png";
    let finalNickname = me.user.nickname;
    let finalIntro = me.user.intro;

    // ğŸ”¥ ì „ë¬¸ê°€ í”„ë¡œí•„ì—ì„œ avatar / nickname / intro ëª¨ë‘ ê°€ì ¸ì˜¤ê¸°
    try {
      const expertRes = await fetch(`${API_URL}/expert/profile/${me.user.id}`);
      const expertData = await expertRes.json();

      if (expertData.success && expertData.profile) {
        if (expertData.profile.avatar_url)
          finalAvatar = expertData.profile.avatar_url;

        if (expertData.profile.nickname)
          finalNickname = expertData.profile.nickname;

        if (expertData.profile.intro)
          finalIntro = expertData.profile.intro;
      }
    } catch {}

    profileIcon.src = finalAvatar;

   dropdown.innerHTML = me.user.isExpert
  ? `
    <a href="expert-register-step1.html">í”„ë¡œí•„ ê´€ë¦¬</a>
    <a href="service-register.html">ì„œë¹„ìŠ¤ ë“±ë¡</a>

    <!-- ğŸ”¥ ì¶”ê°€ -->
    <a href="expert-tasks.html">ë‚´ ì‘ì—… í˜„í™©</a>

    <a href="mypage.html">ë§ˆì´í˜ì´ì§€</a>
    <a href="#" id="logout-link">ë¡œê·¸ì•„ì›ƒ</a>
  `
  : `
    <a href="expert-register-step1.html">ì „ë¬¸ê°€ ë“±ë¡</a>
    <a href="profile-edit.html">í”„ë¡œí•„ ê´€ë¦¬</a>

    <!-- ğŸ”¥ ì¶”ê°€ -->
    <a href="my-orders.html">ë‚´ ì‘ì—… í˜„í™©</a>

    <a href="#" id="logout-link">ë¡œê·¸ì•„ì›ƒ</a>
  `;


    activateDropdownFeatures();

  } catch (err) {
    console.error("ìœ ì € ìƒíƒœ ë¡œë“œ ì˜¤ë¥˜:", err);
  }
}

/* ================================================================
   ë“œë¡­ë‹¤ìš´ + ë¡œê·¸ì•„ì›ƒ
================================================================ */
function activateDropdownFeatures() {
  const profileIcon = document.getElementById("profile-icon");
  const dropdown = document.getElementById("dropdown-menu");
  const logoutLink = document.getElementById("logout-link");
  const logoutBtn = document.getElementById("logout-btn");

  profileIcon.onclick = (e) => {
    e.stopPropagation();
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  };

  document.addEventListener("click", (e) => {
    if (!e.target.closest(".profile-container")) dropdown.style.display = "none";
  });

  async function logout() {
    try {
      const res = await fetch(`${API_URL}/logout`, {
        method: "POST",
        credentials: "include",
      });
      const data = await res.json();

      if (data.success) {
        showToast("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
        setTimeout(() => location.href = "index.html", 1500);
      } else {
        showToast("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨");
      }
    } catch {
      showToast("ì„œë²„ ì˜¤ë¥˜");
    }
  }

  if (logoutLink) logoutLink.onclick = (e) => { e.preventDefault(); logout(); };
  if (logoutBtn) logoutBtn.onclick = (e) => { e.preventDefault(); logout(); };
}

/* ================================================================
   ì•Œë¦¼ ë‚ ì§œ í¬ë§·
================================================================ */
function formatDate(dateString) {
  const d = new Date(dateString);
  return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}-${String(d.getDate()).padStart(2, "0")}`;
}

/* ================================================================
   DOMContentLoaded â€” ì „ì²´ ì´ˆê¸°í™”
================================================================ */
document.addEventListener("DOMContentLoaded", () => {
  const chatBadge = document.getElementById("chatBadge");
  let indexSocket = null;

  /* ================================
     ğŸ’¬ ì±„íŒ… unread ë°°ì§€ + ì‹¤ì‹œê°„ ì†Œì¼“ (ë©”ì¸ ìµœì¢…)
     - ì„œë²„ê°€ chat:notifyë¡œ userë£¸ì— ë³´ë‚´ëŠ” êµ¬ì¡° ëŒ€ì‘
     - unread-countê°€ totalì´ ì—†ì„ ë•Œ rooms/map í•©ì‚° ëŒ€ì‘
  ================================ */

  /* âœ… unread-count ì‘ë‹µì—ì„œ total ê³„ì‚° (ì„œë²„ í˜¸í™˜) */
  function calcChatTotal(data) {
  if (!data || !data.success) return 0;

  // 1) ì„œë²„ê°€ totalì„ ì£¼ë©´ ê·¸ê±¸ ìµœìš°ì„  ì‚¬ìš©
  const t = Number(data.total);
  if (!Number.isNaN(t) && t >= 0) return t;

  const map = data.rooms || data.map || data.unreadMap || {};
  const keys = Object.keys(map);

  // âœ… ì‹ í˜• í‚¤(work:14 / service:14)ê°€ ìˆìœ¼ë©´ ê·¸ í‚¤ë§Œ í•©ì‚°í•´ì„œ "ì¤‘ë³µ 2" ë°©ì§€
  const hasTypedKey = keys.some((k) => k.includes(":"));

  let sum = 0;

  if (hasTypedKey) {
    for (const k of keys) {
      if (!k.includes(":")) continue;
      sum += Number(map[k] || 0);
    }
    return sum;
  }

  // âœ… ì‹ í˜• í‚¤ê°€ ì•„ì˜ˆ ì—†ì„ ë•Œë§Œ êµ¬í˜• í‚¤ë¥¼ í•©ì‚°
  for (const k of keys) sum += Number(map[k] || 0);
  return sum;
}

/* âœ… ë±ƒì§€ ë Œë” */
function renderChatBadge(total) {
  if (!chatBadge) return;
  const n = Number(total || 0);

  if (n > 0) {
    chatBadge.style.display = "flex";
    chatBadge.textContent = n > 99 ? "99+" : String(n);
  } else {
    chatBadge.style.display = "none";
    chatBadge.textContent = "";
  }
}


  /* ================================
     ğŸ’¬ ì±„íŒ… unread ë°°ì§€ ë¡œë“œ
  ================================ */
  async function loadChatUnreadBadge() {
    try {
      const meRes = await fetch(`${API_URL}/auth/me`, {
        credentials: "include",
        cache: "no-store",
      });
      const me = await meRes.json().catch(() => null);

      if (!me || !me.success) {
        renderChatBadge(0);
        return;
      }

      const res = await fetch(`${API_URL}/chat/unread-count`, {
        credentials: "include",
        cache: "no-store",
      });
      const data = await res.json().catch(() => null);

      const total = calcChatTotal(data);
      renderChatBadge(total);
    } catch (e) {
      renderChatBadge(0);
    }
  }

  /* ================================
     (ë³´ì¡°) í´ë§
  ================================ */
  function startChatBadgePolling() {
    setInterval(loadChatUnreadBadge, 3000);
    window.addEventListener("focus", loadChatUnreadBadge);
  }

  /* ================================
     ì†Œì¼“ ì—°ê²°
  ================================ */
  async function initIndexChatSocket() {
    try {
      if (typeof window.io !== "function") {
        console.warn("âŒ socket.io not loaded: window.io is undefined");
        startChatBadgePolling();
        return;
      }

      // ë¡œê·¸ì¸ ì²´í¬
      const meRes = await fetch(`${API_URL}/auth/me`, {
        credentials: "include",
        cache: "no-store",
      });
      const me = await meRes.json().catch(() => null);

      if (!me || !me.success) {
        renderChatBadge(0);
        return;
      }

      if (indexSocket) {
        try { indexSocket.disconnect(); } catch {}
        indexSocket = null;
      }

      indexSocket = window.io(API_URL, {
        withCredentials: true,
        transports: ["polling", "websocket"],
        upgrade: true,
        reconnection: true,
        reconnectionAttempts: 20,
        reconnectionDelay: 800,
        reconnectionDelayMax: 3000,
        timeout: 10000,
      });

      indexSocket.on("connect", async () => {
        console.log("âœ… index socket connected:", indexSocket.id);
        await loadChatUnreadBadge();
      });

      // âœ… í•µì‹¬: ë©”ì¸ì€ chat:notifyë¥¼ ë°˜ë“œì‹œ ë“¤ì–´ì•¼ í•¨
      indexSocket.on("chat:notify", async (payload) => {
        console.log("ğŸ”” chat:notify received on index", payload);
        await loadChatUnreadBadge();
      });

      // í˜¹ì‹œ ì„œë²„ê°€ chat:messageë„ ë³´ë‚´ë©´ ê°™ì´ ëŒ€ì‘ (ë³´ì¡°)
      indexSocket.on("chat:message", async (msg) => {
        console.log("ğŸ“© chat:message received on index", msg);
        await loadChatUnreadBadge();
      });

      // ì½ìŒ/ì‚­ì œ/ë°©ì‚­ì œ ê°™ì€ ê²ƒë„ ì˜¤ë©´ ì•ˆì „í•˜ê²Œ ê°±ì‹ 
      indexSocket.on("chat:read", () => loadChatUnreadBadge());
      indexSocket.on("chat:delete", () => loadChatUnreadBadge());
      indexSocket.on("chat:room-deleted", () => loadChatUnreadBadge());

      indexSocket.on("connect_error", (e) => {
        console.warn("âŒ index socket connect_error:", e?.message || e);
      });

      indexSocket.on("disconnect", (reason) => {
        console.warn("ğŸ”Œ index socket disconnected:", reason);
      });

      // ì†Œì¼“ + í´ë§ ê°™ì´ ëŒë¦¬ë©´ ê°€ì¥ ì•ˆì •ì 
      startChatBadgePolling();
    } catch (e) {
      console.warn("âŒ index socket init fail", e);
      startChatBadgePolling();
    }
  }

  /* ================================
     âœ… ì´ˆê¸° ì‹¤í–‰ (ìˆœì„œ ê³ ì •)
  ================================ */
  loadUserState();
  loadChatUnreadBadge();
  initIndexChatSocket();
});



/* ================================
   ğŸ’¬ ì±„íŒ… unread ë°°ì§€ ë¡œë“œ
================================ */
async function loadChatUnreadBadge() {
  try {
    const meRes = await fetch(`${API_URL}/auth/me`, { credentials: "include" });
    const me = await meRes.json();

    if (!me.success) {
      if (chatBadge) chatBadge.style.display = "none";
      return;
    }

    const res = await fetch(`${API_URL}/chat/unread-count`, { credentials: "include" });
    const data = await res.json();

    // âœ… ì„œë²„ëŠ” totalì„ ì¤€ë‹¤!
    const total = Number(data.total || 0);

   if (data.success && total > 0) {
  chatBadge.style.display = "flex";
  chatBadge.textContent = total; // âœ… ìˆ«ì í‘œì‹œ
} else {
  chatBadge.style.display = "none";
  chatBadge.textContent = "";
}
    
  } catch (e) {
    if (chatBadge) chatBadge.style.display = "none";
  }
}


  /* ============================================================
     ë¸Œëœë“œ ì„¤ê³„ ì‹œì‘ ë²„íŠ¼
  ============================================================ */
 const startBtn = document.getElementById("startBrandBtn");

if (startBtn) {
  startBtn.addEventListener("click", async () => {
    console.log("ğŸ“¦ ë¸Œëœë“œ ì„¤ê³„ ì‹œì‘í•˜ê¸° í´ë¦­ë¨");

    try {
      const res = await fetch(`${API_URL}/brand/check`, {
        credentials: "include"
      });
      const data = await res.json();

      console.log("ğŸ” brand/check ê²°ê³¼:", data);

      if (data.hasPlan) {
        // ì´ë¯¸ ì„¤ê³„ ë‹¨ê³„ ì‘ì„± O â†’ ë¡œë“œë§µìœ¼ë¡œ ì´ë™
        location.href = "brand-roadmap.html";
      } else {
        // ì„¤ê³„ X â†’ ì„¤ê³„ ë‹¨ê³„ ì²« í˜ì´ì§€ë¡œ ì´ë™
        location.href = "brand-flow.html";
      }
    } catch (err) {
      console.error("brand-check ì˜¤ë¥˜:", err);
      // ì„œë²„ ì˜¤ë¥˜ì¼ ë• ê¸°ë³¸ì ìœ¼ë¡œ brand-flow ë¡œ ì´ë™
      location.href = "brand-flow.html";
    }
  });
}
/* ============================================================
   ğŸ’¬ í—¤ë” ì±„íŒ… ë²„íŠ¼ í´ë¦­ â†’ ìµœê·¼ ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™
============================================================ */
const openChatBtn = document.getElementById("openChat");

if (openChatBtn) {
  openChatBtn.addEventListener("click", async () => {
    try {
      // 1) ë¡œê·¸ì¸ ì²´í¬
      const meRes = await fetch(`${API_URL}/auth/me`, { credentials: "include" });
      const me = await meRes.json();

      if (!me.success) {
        openLoginModal();
        return;
      }

      // 2) ë‚´ ì±„íŒ…ë°© ëª©ë¡ ê°€ì ¸ì˜¤ê¸° (ê°€ì¥ ìµœê·¼ 1ê°œ)
      const roomsRes = await fetch(`${API_URL}/chat/rooms`, {
        credentials: "include",
        cache: "no-store",
      });
      const roomsData = await roomsRes.json();

      // ì„œë²„ ì‘ë‹µ í‚¤ê°€ rooms / list ë“±ì¼ ìˆ˜ ìˆì–´ì„œ ë°©ì–´ì ìœ¼ë¡œ ì²˜ë¦¬
      const rooms = roomsData.rooms || roomsData.list || roomsData.data || [];

      // ì±„íŒ…ë°©ì´ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì±„íŒ… í˜ì´ì§€(ëª©ë¡)ë¡œ
      if (!roomsData.success || !rooms.length) {
        location.href = "chat.html";
        return;
      }

      // 3) ì²« ë²ˆì§¸(=ìµœê·¼) ì±„íŒ…ë°©ìœ¼ë¡œ ì§„ì…
      const r = rooms[0];
      const roomId = r.room_id || r.id || r.roomId;
      const targetId = r.target_id || r.other_user_id || r.partner_id || r.targetId;

      if (!roomId) {
        location.href = "chat.html";
        return;
      }

// âœ… í•µì‹¬: chat.jsì™€ ë™ì¼í•œ roomId íŒŒë¼ë¯¸í„° ì‚¬ìš©
if (targetId) {
  location.href =
    `chat.html?roomId=${encodeURIComponent(roomId)}&target=${encodeURIComponent(targetId)}`;
} else {
  location.href =
    `chat.html?roomId=${encodeURIComponent(roomId)}`;
}


    } catch (err) {
      console.error("ì±„íŒ… ì´ë™ ì‹¤íŒ¨:", err);
      alert("ì±„íŒ… í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    }
  });
}


  /* ============================================================
     ì¹´í…Œê³ ë¦¬ ì´ë™
  ============================================================ */
  document.querySelectorAll(".category").forEach((cat) => {
    cat.addEventListener("click", () => {
      const type = cat.dataset.category;
      if (type)
        location.href = `category.html?type=${encodeURIComponent(type)}`;
    });
  });

  /* ============================================================
     ê²€ìƒ‰ ê¸°ëŠ¥
  ============================================================ */
  const searchInput = document.querySelector(".search-bar input");
  const searchBtn = document.getElementById("mainSearchBtn");

  async function checkBrandPlan() {
    const res = await fetch(`${API_URL}/brand/check`, { credentials: "include" });
    const data = await res.json();
    return data.hasPlan;
  }

  function goSearch() {
    const keyword = searchInput.value.trim();
    checkBrandPlan().then(hasPlan => {
      if (hasPlan) location.href = "brand-roadmap.html";
      else location.href = `brand-flow.html?keyword=${encodeURIComponent(keyword)}`;
    });
  }

  searchBtn.onclick = goSearch;
  searchInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") goSearch();
  });

  /* ============================================================
     ê³ ê°ì„¼í„°
  ============================================================ */
  const openSupport = document.getElementById("openSupportIndex");
  const supportModal = document.getElementById("supportModal");
  const closeSupport = document.getElementById("closeSupport");

  if (openSupport) openSupport.onclick = () => supportModal.style.display = "grid";
  if (closeSupport) closeSupport.onclick = () => supportModal.style.display = "none";
  supportModal?.addEventListener("click", (e) => {
    if (e.target === supportModal) supportModal.style.display = "none";
  });

/* ================================
     ğŸ”” ì•Œë¦¼ DOM
  ================================ */
  const noticeIcon   = document.querySelector(".notice-icon");
  const noticePanel  = document.getElementById("noticePanel");
  const noticeBadge  = document.getElementById("notice-badge");
  const noticeContent= document.getElementById("noticeContent");
  const tabs         = document.querySelectorAll(".notice-tab");
  const underline    = document.querySelector(".notice-tab-underline");

  let currentTab = "trade";
/* ================================
   ğŸ”½ ì•Œë¦¼ íƒ­ ë°‘ì¤„ ìœ„ì¹˜ ê³„ì‚°
================================ */
function moveUnderline(tab) {
  const tabsRect = tab.parentElement.getBoundingClientRect();
  const tabRect = tab.getBoundingClientRect();

  underline.style.left =
    tabRect.left - tabsRect.left + tabRect.width / 2 - underline.offsetWidth / 2 + "px";
}


  /* ================================
     ë‚ ì§œ í¬ë§·
  ================================ */
  function formatDate(dateString) {
    const d = new Date(dateString);
    return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
  }

  /* ================================
     ğŸ”´ ì•ˆ ì½ì€ ì•Œë¦¼ ë±ƒì§€
  ================================ */
  async function loadUnreadBadge() {
    try {
      const res = await fetch(`${API_URL}/notice/unread-count`, { credentials:"include" });
      const data = await res.json();

      if (data.success && data.count > 0) {
        noticeBadge.textContent = data.count;
        noticeBadge.style.display = "flex";
      } else {
        noticeBadge.style.display = "none";
      }
    } catch {}
  }

/* ================================
   ğŸ”” ì•Œë¦¼ ëª©ë¡
================================ */
const noticeEmpty  = document.querySelector(".notice-empty");
const noticeFooter = document.querySelector(".notice-footer");

async function loadNotices(type = "trade") {
  currentTab = type;

  noticeList.innerHTML = "";

  const res = await fetch(`${API_URL}/notice/list?type=${type}`, {
    credentials: "include",
  });
  const data = await res.json();

  // ğŸ”´ ì•Œë¦¼ ì—†ìŒ
  if (!data.success || !data.notices.length) {
    noticeList.style.display = "none";
    noticeEmpty.style.display = "block";
    noticeFooter.style.display = "block";
    return;
  }

  // ğŸŸ¢ ì•Œë¦¼ ìˆìŒ
  noticeList.style.display = "block";
  noticeEmpty.style.display = "none";   // ğŸ”¥ í•µì‹¬
  noticeFooter.style.display = "none";  // ğŸ”¥ í•µì‹¬

  data.notices.forEach((n) => {
    const item = document.createElement("div");
    item.className = "notice-item-panel";

    if (n.type === "trade") {
      item.innerHTML = `
        <div class="trade-notice-card">
          <div class="trade-badge">ğŸ“¦ ê±°ë˜ ì•Œë¦¼</div>
          <div class="trade-message">${n.message}</div>
          <div class="notice-date">${formatDate(n.created_at)}</div>
        </div>
      `;
    } else {
      item.innerHTML = `
        <div class="notice-msg">${n.message}</div>
        <div class="notice-date">${formatDate(n.created_at)}</div>
      `;
    }

    item.onclick = (e) => {
      e.stopPropagation();
      noticePanel.style.display = "none";

      if (n.type === "trade" && n.task_key) {
        location.href = `expert-tasks.html?task=${encodeURIComponent(n.task_key)}`;
      }
    };

    noticeList.appendChild(item);
  });
}



/* ================================
   ğŸ”” íŒ¨ë„ í† ê¸€
================================ */
noticeIcon.onclick = () => {
  const isOpen = noticePanel.style.display === "block";
  noticePanel.style.display = isOpen ? "none" : "block";

  if (!isOpen) {
    const active = document.querySelector(".notice-tab.active");
    if (active) requestAnimationFrame(() => moveUnderline(active));
    loadNotices(currentTab);
  }
};


/* ================================
   ğŸ”„ íƒ­ ì „í™˜
================================ */
tabs.forEach(tab => {
  tab.onclick = () => {
    if (tab.dataset.tab === currentTab) return;

    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");

    currentTab = tab.dataset.tab;

    moveUnderline(tab);      // ğŸ”¥ ì´ ì¤„ í•„ìˆ˜
    loadNotices(currentTab);
  };
});


/* ================================
   ì™¸ë¶€ í´ë¦­ â†’ ë‹«ê¸°
================================ */
document.addEventListener("click", (e) => {
  if (
    noticePanel.style.display === "block" &&
    !noticePanel.contains(e.target) &&
    !noticeIcon.contains(e.target)
  ) {
    noticePanel.style.display = "none";
  }
});

  /* ================================
     ì´ˆê¸° ì‹¤í–‰
  ================================ */
loadUserState();        // âœ… ë¨¼ì € (ë¡œê·¸ì¸/í—¤ë” UI ì„¸íŒ…)
loadUnreadBadge();      // ğŸ”” ì•Œë¦¼ ë°°ì§€
loadChatUnreadBadge();  // ğŸ’¬ ì±„íŒ… ë°°ì§€(ì´ˆê¸°)
initIndexChatSocket();  // ğŸ’¬ ì‹¤ì‹œê°„(ì´í›„ ì´ë²¤íŠ¸ë¡œ unread ì¬ì¡°íšŒ)





</script>


<div id="toast" style="
  position: fixed;
  bottom: 40px;
  right: 40px;
  padding: 14px 22px;
  background: rgba(0,0,0,0.85);
  color: #fff;
  font-size: 14px;
  border-radius: 10px;
  box-shadow: 0 4px 14px rgba(0,0,0,0.25);
  opacity: 0;
  transform: translateY(20px);
  pointer-events: none;
  transition: all 0.35s ease;
  z-index: 99999;
"></div>

<!-- ê³ ê°ì„¼í„° ëª¨ë‹¬ -->
<div id="supportModal" style="
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  place-items: center;
  z-index: 9999;
  backdrop-filter: blur(2px);
">
  <div style="
    background: #fff;
    width: min(480px, 90vw);
    padding: 28px;
    border-radius: 18px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.18);
    max-height: 85vh;
    overflow-y: auto;
  ">

    <!-- Header -->
    <h2 style="font-size:22px; font-weight:800; margin-bottom:15px; color:#111827;">
      ê³ ê°ì„¼í„° Â· ë¬¸ì˜í•˜ê¸°
    </h2>

    <!-- Desc -->
    <p style="color:#6b7280; font-size:14px; margin-bottom:20px;">
      BlueOn íŒ€ì´ ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ë„ì›€ì„ ë“œë¦½ë‹ˆë‹¤.<br>
      ì•„ë˜ì—ì„œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ í™•ì¸í•˜ê±°ë‚˜, ì§ì ‘ ë¬¸ì˜í•´ì£¼ì„¸ìš”.
    </p>

    <!-- FAQ BOX -->
<div style="margin-bottom:25px;">
  <h3 style="font-size:15px; font-weight:700; margin-bottom:12px;">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>

  <!-- FAQ ITEM 1 -->
  <div style="margin-bottom:12px;">
    <div onclick="location.href='refund-policy.html'" style="
      padding:12px 14px;
      background:#f3f4f6;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;">
      ê²°ì œ/í™˜ë¶ˆì€ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ë‚˜ìš”?
    </div>
  </div>

  <!-- FAQ ITEM 2 -->
  <div style="margin-bottom:12px;">
    <div onclick="location.href='expert-inquiry-guide.html'" style="
      padding:12px 14px;
      background:#f3f4f6;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
    ">
      ì „ë¬¸ê°€ì—ê²Œ ì‘ì—… ë¬¸ì˜ë¥¼ ë‚¨ê¸°ê³  ì‹¶ì–´ìš”.
    </div>
  </div>

  <!-- FAQ ITEM 3 -->
  <div style="margin-bottom:12px;">
    <div onclick="location.href='work-not-satisfied.html'" style="
      padding:12px 14px;
      background:#f3f4f6;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
    ">
      ì‘ì—…ì´ ë§ˆìŒì— ë“¤ì§€ ì•Šì„ ë• ì–´ë–»ê²Œ í•˜ë‚˜ìš”? 
    </div>
  </div>
    <div id="faq3" style="display:none; padding:10px 14px; font-size:14px; color:#6b7280;">
      ì „ë¬¸ê°€ì—ê²Œ ìˆ˜ì • ìš”ì²­ì´ ê°€ëŠ¥í•˜ë©°,<br>
      ìˆ˜ì • ë²”ìœ„ëŠ” ì„œë¹„ìŠ¤ ë“±ë¡ ì‹œ ì‘ì„±ëœ â€˜ìˆ˜ì • íšŸìˆ˜/ì¡°ê±´â€™ì„ ë”°ë¦…ë‹ˆë‹¤.
    </div>
    <div style="
  background:#eef4ff;
  border-left:4px solid #0056ff;
  padding:14px 18px;
  border-radius:10px;
  margin-bottom:20px;
  font-size:14px;
  line-height:1.7;
  color:#1e293b;
">
  <b>ğŸ“ ê³ ê°ì„¼í„° ì—°ë½ì²˜</b><br>
  ì´ë©”ì¼: <b>di702934@gmail.com</b><br>
  ì „í™”ë²ˆí˜¸: <b>010-3585-3426</b><br>
  ìš´ì˜ ì‹œê°„: í‰ì¼ 18:00 ~ 22:00
</div>
  </div>
</div>
<!-- ğŸ”¥ PG ì‹¬ì‚¬ìš©: ë¸Œëœë“œ ì„¤ê³„ ë¶„ê¸° ê¸°ëŠ¥ ì„ì‹œ ë¹„í™œì„±í™” ìŠ¤í¬ë¦½íŠ¸ -->
<script>
(function(){
  const btn = document.getElementById("startBrandBtn");
  if (!btn) return;

  // ê¸°ì¡´ ì´ë²¤íŠ¸ ë®ì–´ì“°ê¸° (override)
  btn.addEventListener("click", function(e){
    e.preventDefault();
    console.log("âš ï¸ PG ì‹¬ì‚¬ ëª¨ë“œ: brand-flow ì´ë™ ì°¨ë‹¨ â†’ roadmapìœ¼ë¡œ ê³ ì • ì´ë™ë¨");
    window.location.href = "brand-roadmap.html";
  }, true); // â† true = ê¸°ì¡´ í•¸ë“¤ëŸ¬ë³´ë‹¤ ìš°ì„  ì‹¤í–‰ë¨
})();
async function forceRenderNotices() {
  const res = await fetch("/notice/list?type=trade", { cache: "no-store" });
  const data = await res.json();

  console.log("ğŸ” notice API response:", data);

  // ğŸ”´ bodyì— ì§ì ‘ ê½‚ì•„ë²„ë¦¼ (íŒ¨ë„ ë¬´ì‹œ)
  const testBox = document.createElement("div");
  testBox.style.position = "fixed";
  testBox.style.top = "80px";
  testBox.style.right = "20px";
  testBox.style.width = "320px";
  testBox.style.background = "#fff";
  testBox.style.border = "2px solid red";
  testBox.style.zIndex = "99999";

  testBox.innerHTML = "<b>NOTICE TEST</b>";

  data.notices.forEach(n => {
    const div = document.createElement("div");
    div.textContent = n.message;
    div.style.padding = "10px";
    div.style.borderBottom = "1px solid #eee";
    testBox.appendChild(div);
  });

  document.body.appendChild(testBox);
}


</script>


</body>
</html>


